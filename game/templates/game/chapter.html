{% load static %}
<!DOCTYPE html>
<html>
<head>
    <title>{{ chapter.title }}</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Tiny5&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="{% static 'global.css' %}">
</head>
<body>
    <h1>{{ chapter.title }}</h1>
    <p>{{ chapter.content }}</p>
    <img src="{{ chapter.character.image.url }}" alt="{{ chapter.character.name }}">
    <ul>
        {% for choice in chapter.choices.all %}
            {% if choice.next_chapter %}
                <li>
                    <a href="{% url 'chapter_view' choice.next_chapter.num %}"
                       onclick="document.getElementById('update-progress-form-{{ choice.next_chapter.num }}').submit();">
                        {{ choice.text }}
                    </a>
                    <form id="update-progress-form-{{ choice.next_chapter.num }}" method="post" action="{% url 'update_progress' %}" style="display: none;">
                        {% csrf_token %}
                        <input type="hidden" name="next_chapter_num" value="{{ choice.next_chapter.num }}">
                    </form>
                </li>
            {% else %}
                <li>{{ choice.text }}</li>
            {% endif %}
        {% endfor %}
    </ul>
</body>
</html>